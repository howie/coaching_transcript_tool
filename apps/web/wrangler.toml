# Cloudflare Worker Configuration for Frontend Application (coachly.doxa.com.tw)
name = "coachly-doxa-com-tw"

# The main entry point for the Worker, generated by @cloudflare/next-on-pages
main = ".cloudflare/worker.js"

# Set the compatibility date for the Workers runtime
compatibility_date = "2024-07-25"

# Define the build process for the Worker
[build]
# 1. Run the standard Next.js build command.
# 2. Use @cloudflare/next-on-pages to adapt the output for Cloudflare Workers.
command = "npm run build"
# The directory containing the static assets to be uploaded.
# @cloudflare/next-on-pages places them in the ".vercel/output/static" directory.
watch_dir = ".vercel/output/static"

# [site] configuration is used to serve static assets.
[site]
bucket = ".vercel/output/static"

# Environment variables for the production environment
[vars]
ENVIRONMENT = "production"
# NODE_ENV is required by Next.js
NODE_ENV = "production"

# Configuration for the development environment
[env.development]
name = "coachly-doxa-com-tw-dev"

[env.development.vars]
ENVIRONMENT = "development"
NODE_ENV = "development"

# Resource limits for the Worker
[limits]
cpu_ms = 100
memory_mb = 256
