# Cloudflare Worker Configuration for Frontend Application (coachly.doxa.com.tw)
# This file is located at the project root.
name = "coachly-doxa-com-tw"

# The main entry point for the Worker, generated by @cloudflare/next-on-pages
# The path is now relative to the project root.
main = "apps/web/.cloudflare/worker.js"

# Set the compatibility date for the Workers runtime
compatibility_date = "2024-07-25"

# Define the build process for the Worker
[build]
# Use turbo to run the build script specifically for the frontend package.
command = "turbo run build --filter=@coaching-transcript-tool/frontend"
# The directory containing the static assets to be uploaded.
# The path is now relative to the project root.
watch_dir = "apps/web/.vercel/output/static"

# [site] configuration is used to serve static assets.
# The path is now relative to the project root.
[site]
bucket = "apps/web/.vercel/output/static"

# Environment variables for the production environment
[vars]
ENVIRONMENT = "production"
# NODE_ENV is required by Next.js
NODE_ENV = "production"

# Configuration for the development environment
[env.development]
name = "coachly-doxa-com-tw-dev"

[env.development.vars]
ENVIRONMENT = "development"
NODE_ENV = "development"

# Resource limits for the Worker
[limits]
cpu_ms = 100
memory_mb = 256
