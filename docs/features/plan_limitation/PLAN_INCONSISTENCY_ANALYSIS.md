# Plan Limitation ä¸ä¸€è‡´æ€§åˆ†æèˆ‡ä¿®å¾©è¨ˆåŠƒ

## å•é¡Œæ¦‚è¿°

åœ¨å¯¦æ–½ plan limitation åŠŸèƒ½æ™‚ç™¼ç¾å‰ç«¯ change-plan é é¢èˆ‡å¾Œç«¯è³‡æ–™åº«è¨­å®šå­˜åœ¨å¤šé …ä¸ä¸€è‡´ï¼Œå½±éŸ¿ç”¨æˆ¶é«”é©—å’Œç³»çµ±ä¸€è‡´æ€§ã€‚

## ä¸ä¸€è‡´å•é¡Œè©³ç´°åˆ†æ

### 1. Plan åç¨±ä¸ä¸€è‡´

| ä½ç½® | FREE | PRO | ç¬¬ä¸‰ç´š |
|------|------|-----|--------|
| å‰ç«¯ change-plan | `Free` | `Pro` | `Business` |
| UserPlan enum | `FREE` | `PRO` | `ENTERPRISE` |
| PlanName enum | `free` | `pro` | `enterprise` |

**å½±éŸ¿**: å‰ç«¯ç„¡æ³•æ­£ç¢ºæ˜ å°„åˆ°å¾Œç«¯ plan é¡å‹

### 2. åŠŸèƒ½é™åˆ¶ä¸ä¸€è‡´

#### FREE Plan
| åŠŸèƒ½é …ç›® | å‰ç«¯é¡¯ç¤º | å¾Œç«¯å¯¦éš› (BETA) | å·®ç•° |
|---------|---------|---------------|------|
| æœƒè«‡æ•¸ | 5 uploaded recordings | 3 sessions | âŒ ä¸ç¬¦ |
| è½‰éŒ„æ•¸ | 10 linked recordings | 5 transcriptions | âŒ ä¸ç¬¦ |
| æ™‚é•·é™åˆ¶ | Up to 30 min per recording | 60 minutes total | âŒ æ¦‚å¿µä¸åŒ |
| æª”æ¡ˆå¤§å° | æœªåˆ—å‡º | 25MB per file | âŒ éºæ¼ |
| èŠå¤©é¡åº¦ | 10 chat credits | ç„¡æ­¤æ¦‚å¿µ | âŒ å¤šé¤˜åŠŸèƒ½ |

#### PRO Plan  
| åŠŸèƒ½é …ç›® | å‰ç«¯é¡¯ç¤º | å¾Œç«¯å¯¦éš› (BETA) | å·®ç•° |
|---------|---------|---------------|------|
| æœƒè«‡æ•¸ | Unlimited | 25 sessions | âŒ åš´é‡ä¸ç¬¦ |
| è½‰éŒ„æ•¸ | 1,200 min transcription | 50 transcriptions | âŒ å–®ä½ä¸åŒ |
| æ™‚é•·é™åˆ¶ | Up to 90 min per recording | 300 minutes total | âŒ æ¦‚å¿µä¸åŒ |
| æª”æ¡ˆå¤§å° | æœªåˆ—å‡º | 100MB per file | âŒ éºæ¼ |

#### BUSINESS/ENTERPRISE Plan
| åŠŸèƒ½é …ç›® | å‰ç«¯é¡¯ç¤º | å¾Œç«¯å¯¦éš› (BETA) | å·®ç•° |
|---------|---------|---------------|------|
| æœƒè«‡æ•¸ | Unlimited | 500 sessions | âŒ ä¸ç¬¦ |
| è½‰éŒ„æ•¸ | 6,000 min transcription | 1000 transcriptions | âŒ å–®ä½ä¸åŒ |
| æ™‚é•·é™åˆ¶ | Up to 4 hours per recording | 1500 minutes total | âŒ æ¦‚å¿µä¸åŒ |
| æª”æ¡ˆå¤§å° | æœªåˆ—å‡º | 500MB per file | âŒ éºæ¼ |

### 3. åƒ¹æ ¼ä¸ä¸€è‡´

| Plan | å‰ç«¯åƒ¹æ ¼ (USD) | å¾Œç«¯åƒ¹æ ¼ (USD) | å·®ç•° |
|------|-------------|-------------|------|
| FREE | $0 | $0 | âœ… ä¸€è‡´ |
| PRO | $25/$20 (æœˆ/å¹´) | $29/$290 (æœˆ/å¹´) | âŒ ä¸ç¬¦ |
| BUSINESS/ENTERPRISE | $60/$50 (æœˆ/å¹´) | $99/$990 (æœˆ/å¹´) | âŒ åš´é‡ä¸ç¬¦ |

## æˆæœ¬èˆ‡ç²åˆ©åˆ†æéœ€æ±‚

### TODO: æˆæœ¬è¨ˆç®—åˆ†æ

éœ€è¦é€²è¡Œä»¥ä¸‹åˆ†æä¾†ç¢ºå®šåˆé©çš„ plan limits:

1. **STT æœå‹™æˆæœ¬åˆ†æ**
   - Google Speech-to-Text API è¨ˆè²»
   - AssemblyAI è¨ˆè²»
   - å¹³å‡æ¯åˆ†é˜è½‰éŒ„æˆæœ¬

2. **åŸºç¤è¨­æ–½æˆæœ¬**
   - GCS å„²å­˜æˆæœ¬
   - Compute è³‡æºä½¿ç”¨
   - è³‡æ–™åº«å­˜å„²å’ŒæŸ¥è©¢æˆæœ¬

3. **ç²åˆ©ç›®æ¨™è¨­å®š**
   - æ¯å€‹ plan çš„ç›®æ¨™æ¯›åˆ©ç‡
   - ç”¨æˆ¶ç²å–æˆæœ¬ (CAC)
   - ç”Ÿå‘½é€±æœŸåƒ¹å€¼ (LTV)

4. **ç«¶çˆ­å°æ‰‹åˆ†æ**
   - é¡ä¼¼æœå‹™çš„å®šåƒ¹ç­–ç•¥
   - åŠŸèƒ½å°æ¯”åˆ†æ

### TODO: å»ºè­°çš„ Plan çµæ§‹

åŸºæ–¼æˆæœ¬åˆ†æå¾Œï¼Œå»ºè­°é‡æ–°è¨­è¨ˆï¼š

```typescript
// å»ºè­°çš„æ–° plan çµæ§‹ï¼ˆå¾…æˆæœ¬åˆ†æå¾Œç¢ºèªï¼‰
interface PlanStructure {
  FREE: {
    sessions_per_month: number,      // å»ºè­°: 3-5
    transcription_minutes: number,   // å»ºè­°: 30-60 åˆ†é˜
    file_size_mb: number,           // å»ºè­°: 25MB
    price_usd: 0
  },
  PRO: {
    sessions_per_month: number,      // å»ºè­°: 25-50
    transcription_minutes: number,   // å»ºè­°: 300-600 åˆ†é˜
    file_size_mb: number,           // å»ºè­°: 100MB
    price_usd: number               // å¾…å®š
  },
  ENTERPRISE: {
    sessions_per_month: number,      // å»ºè­°: 100-500
    transcription_minutes: number,   // å»ºè­°: 1200-3000 åˆ†é˜
    file_size_mb: number,           // å»ºè­°: 500MB-1GB
    price_usd: number               // å¾…å®š
  }
}
```

## i18n ç¿»è­¯å•é¡Œ

### ç•¶å‰éŒ¯èª¤

ç”¨æˆ¶çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ `"errors.sessionLimitExceededWithPlan"` è€Œéç¿»è­¯å¾Œçš„æ–‡å­—ï¼Œè¡¨ç¤º i18n ç¿»è­¯åŠŸèƒ½æœªæ­£ç¢ºé‹ä½œã€‚

### éŒ¯èª¤åŸå› åˆ†æ

1. **ç¿»è­¯ key æœªè¢«è§£æ**: `t()` å‡½æ•¸æ²’æœ‰æ­£ç¢ºæ¥æ”¶æˆ–è™•ç† key
2. **åƒæ•¸å‚³éå•é¡Œ**: å‹•æ…‹åƒæ•¸ (limit, plan) å¯èƒ½æœªæ­£ç¢ºå‚³é
3. ** ç¿»è­¯æª”æ¡ˆè·¯å¾‘å•é¡Œ**: translation key å¯èƒ½ä¸å­˜åœ¨

### âœ… i18n ä¿®å¾©å®Œæˆæ¸…å–®

- [x] âœ… **å·²ä¿®å¾©**: ç™¼ç¾ç¿»è­¯ keys è¢«åŠ åˆ°éŒ¯èª¤çš„ç¿»è­¯ç³»çµ± (translations.ts vs i18n/translations)
- [x] âœ… **å·²ä¿®å¾©**: å°‡éŒ¯èª¤è¨Šæ¯ç¿»è­¯åŠ åˆ°æ­£ç¢ºçš„æ¨¡çµ„åŒ–ç¿»è­¯ç³»çµ± (common.ts)
- [x] âœ… **å·²ä¿®å¾©**: æ›´æ–° i18n-context æ”¯æ´åƒæ•¸æ’å€¼åŠŸèƒ½
- [x] âœ… **å·²ä¿®å¾©**: ç¢ºèª ApiClient.setTranslationFunction() æ­£ç¢ºè¨­å®š
- [x] âœ… **å·²ä¿®å¾©**: æª¢æŸ¥ parseErrorMessage å‡½æ•¸çš„åƒæ•¸å‚³é
- [x] âœ… **å·²æ¸¬è©¦**: å»ºç«‹å®Œæ•´æ¸¬è©¦è¦†è“‹ 13 å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼Œå…¨éƒ¨é€šé
- [x] âœ… **å·²ä¿®å¾©**: ç”¨æˆ¶ç¾åœ¨å¯ä»¥çœ‹åˆ°æœ¬åœ°åŒ–çš„éŒ¯èª¤è¨Šæ¯è€Œé key

**ä¿®å¾©çµæœ**: 
- ä¸­æ–‡: `"æ‚¨å·²é”åˆ°æ¯æœˆæœƒè«‡æ•¸é™åˆ¶ 3 æ¬¡ï¼ˆå…è²» æ–¹æ¡ˆï¼‰ã€‚è€ƒæ…®å‡ç´šæ–¹æ¡ˆä»¥ç²å¾—æ›´é«˜é™åˆ¶ã€‚"`
- English: `"You have reached your monthly session limit of 3 (FREE plan). Consider upgrading your plan for higher limits."`

## ä¿®å¾©å„ªå…ˆç´š

### Phase 1: ç·Šæ€¥ä¿®å¾© (æœ¬é€±)
1. âœ… **å®Œæˆ**: ä¿®å¾© i18n ç¿»è­¯é¡¯ç¤ºå•é¡Œ
2. ğŸ”„ **é€²è¡Œä¸­**: çµ±ä¸€ plan åç¨±æ˜ å°„ (frontend â†” backend)
3. ğŸ”„ **å¾…å®Œæˆ**: æ›´æ–°å‰ç«¯ change-plan é é¢é¡¯ç¤ºæ­£ç¢ºçš„ BETA limits

### Phase 2: æˆæœ¬åˆ†æ (ä¸‹é€±)
1. é€²è¡Œè©³ç´°çš„æˆæœ¬èˆ‡ç²åˆ©åˆ†æ
2. åˆ¶å®šæ–°çš„ plan pricing ç­–ç•¥
3. ç¢ºå®šæœ€çµ‚çš„ plan limits

### Phase 3: ç³»çµ±æ›´æ–° (ä¸‹ä¸‹é€±)
1. æ›´æ–°å¾Œç«¯ plan limits é…ç½®
2. æ›´æ–°å‰ç«¯ plan é¡¯ç¤º
3. é€²è¡Œå®Œæ•´çš„ E2E æ¸¬è©¦

## å½±éŸ¿ç¯„åœ

### ç”¨æˆ¶é«”é©—å½±éŸ¿
- **é«˜**: ç”¨æˆ¶çœ‹åˆ°çš„åŠŸèƒ½èˆ‡å¯¦éš›ä¸ç¬¦ï¼Œé€ æˆå›°æƒ‘
- **ä¸­**: éŒ¯èª¤è¨Šæ¯æœªç¿»è­¯å½±éŸ¿éè‹±èªç”¨æˆ¶é«”é©—

### å•†æ¥­å½±éŸ¿
- **é«˜**: å®šåƒ¹ä¸ä¸€è‡´å¯èƒ½å½±éŸ¿ä»˜è²»è½‰æ›
- **ä¸­**: åŠŸèƒ½é™åˆ¶ä¸æ˜ç¢ºå½±éŸ¿ç”¨æˆ¶æœŸæœ›ç®¡ç†

### æŠ€è¡“å‚µå‹™
- **ä¸­**: å‰å¾Œç«¯ä¸ä¸€è‡´å¢åŠ ç¶­è­·è¤‡é›œåº¦
- **ä½**: i18n å•é¡Œå½±éŸ¿ä»£ç¢¼å“è³ª

## ä¸‹ä¸€æ­¥è¡Œå‹•

1. **ç«‹å³**: ä¿®å¾© i18n ç¿»è­¯å•é¡Œ
2. **æœ¬é€±**: å®Œæˆ plan ä¸€è‡´æ€§ä¿®å¾©
3. **ä¸‹é€±**: é–‹å§‹æˆæœ¬åˆ†æå’Œå®šåƒ¹é‡æ–°è¨­è¨ˆ
4. **æŒçºŒ**: å»ºç«‹è‡ªå‹•åŒ–æ¸¬è©¦ç¢ºä¿å‰å¾Œç«¯ä¸€è‡´æ€§

---

**æ–‡ä»¶æ›´æ–°æ—¥æœŸ**: 2025-01-17  
**è² è²¬äºº**: Claude Code Assistant  
**ç‹€æ…‹**: åˆ†æå®Œæˆï¼Œå¾…ä¿®å¾©å¯¦æ–½